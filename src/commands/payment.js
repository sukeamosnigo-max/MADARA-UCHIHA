const a25_0x585bc7=a25_0x57aa;(function(_0x1e1cef,_0x348e69){const _0x1559ea=a25_0x57aa,_0x1128a9=_0x1e1cef();while(!![]){try{const _0x40a0fc=parseInt(_0x1559ea(0x1dd))/0x1+parseInt(_0x1559ea(0x19f))/0x2+-parseInt(_0x1559ea(0x18d))/0x3+-parseInt(_0x1559ea(0x1d5))/0x4*(parseInt(_0x1559ea(0x228))/0x5)+-parseInt(_0x1559ea(0x18e))/0x6*(parseInt(_0x1559ea(0x201))/0x7)+-parseInt(_0x1559ea(0x1d3))/0x8*(parseInt(_0x1559ea(0x1e6))/0x9)+parseInt(_0x1559ea(0x212))/0xa;if(_0x40a0fc===_0x348e69)break;else _0x1128a9['push'](_0x1128a9['shift']());}catch(_0x177074){_0x1128a9['push'](_0x1128a9['shift']());}}}(a25_0x2e5d,0x5198c));const {Lipana}=require(a25_0x585bc7(0x193));let lipana=null,botSocket=null;const ADMIN_NUMBERS=['254745282166@s.whatsapp.net',a25_0x585bc7(0x1e9)];function setBotSocket(_0x4f5398){botSocket=_0x4f5398;}function initLipana(){const _0xbdf703=a25_0x585bc7,_0x557d0f={'OzFbe':_0xbdf703(0x1e5),'DTKAE':_0xbdf703(0x1a3),'EjQvQ':_0xbdf703(0x1fb),'ONaBo':function(_0x5999f3){return _0x5999f3();},'bZkkw':function(_0x1a4363,_0x1e05e1){return _0x1a4363===_0x1e05e1;},'DlCAm':'sandbox','NSlaT':_0xbdf703(0x1cb)},_0x116aa0=(function(){const _0x5a1f00=_0xbdf703,_0xc50dde={'WGzBt':_0x557d0f['OzFbe']};if(_0x557d0f[_0x5a1f00(0x1fd)]!==_0x5a1f00(0x1a4)){let _0x4db3e3=!![];return function(_0x5cde90,_0xaec2d1){const _0x3d3052=_0x4db3e3?function(){const _0x2bf821=a25_0x57aa;if(_0xaec2d1){const _0x36ea41=_0xaec2d1[_0x2bf821(0x1ab)](_0x5cde90,arguments);return _0xaec2d1=null,_0x36ea41;}}:function(){};return _0x4db3e3=![],_0x3d3052;};}else _0x38ee17=_0xc50dde[_0x5a1f00(0x1b8)]+_0x5e5310[_0x5a1f00(0x1d0)](0x1);}()),_0x482ab2=_0x116aa0(this,function(){const _0x2879f8=_0xbdf703;return _0x482ab2[_0x2879f8(0x194)]()['search'](_0x557d0f[_0x2879f8(0x18b)])['toString']()['constructor'](_0x482ab2)['search'](_0x557d0f[_0x2879f8(0x18b)]);});_0x557d0f['ONaBo'](_0x482ab2);if(!process['env'][_0xbdf703(0x1ca)])return console[_0xbdf703(0x1f8)]('LIPANA_SECRET_KEY\x20not\x20set\x20-\x20payment\x20features\x20will\x20not\x20work'),null;const _0x28747c=_0x557d0f[_0xbdf703(0x1a2)](process[_0xbdf703(0x1d9)][_0xbdf703(0x188)],_0x557d0f[_0xbdf703(0x1bd)])?_0x557d0f['DlCAm']:_0x557d0f['NSlaT'];return console[_0xbdf703(0x21c)](_0xbdf703(0x182)+_0x28747c+_0xbdf703(0x1df)),new Lipana({'apiKey':process[_0xbdf703(0x1d9)][_0xbdf703(0x1ca)],'environment':_0x28747c});}function a25_0x57aa(_0x225839,_0x15db63){_0x225839=_0x225839-0x182;const _0x429ca2=a25_0x2e5d();let _0x5d11a1=_0x429ca2[_0x225839];return _0x5d11a1;}lipana=initLipana();const pendingPayments=new Map();async function initiateSTKPush(_0x30090f,_0xc6f262,_0xa1ac9b,_0x347604=null,_0x501ce1=null){const _0x357c2f=a25_0x585bc7,_0x2e5290={'foqUN':function(_0x5d95b7,_0x396d83){return _0x5d95b7>_0x396d83;},'QNCXW':function(_0x25ef3c,_0x1217ad){return _0x25ef3c-_0x1217ad;},'DsDTh':function(_0x486e28){return _0x486e28();},'sPrUn':function(_0xfba530,_0xb8b87b){return _0xfba530===_0xb8b87b;},'TZmLu':'hQFIK','OjBHv':function(_0x3879a3,_0x314717){return _0x3879a3+_0x314717;},'AFFtw':_0x357c2f(0x1e5),'aKnRI':function(_0x74ed13,_0x2dc38a){return _0x74ed13!==_0x2dc38a;},'EhArs':_0x357c2f(0x18c),'oYuNu':_0x357c2f(0x22b),'aPkdy':function(_0x431698,_0x584099){return _0x431698(_0x584099);},'Nwxte':_0x357c2f(0x1e7),'cOwWO':'Payment\x20initiation\x20failed'};!lipana&&(lipana=_0x2e5290[_0x357c2f(0x189)](initLipana));if(!lipana)throw new Error(_0x357c2f(0x18a));let _0x5af595=_0x30090f[_0x357c2f(0x194)]()[_0x357c2f(0x22a)](/\s+/g,'')[_0x357c2f(0x22a)](/[^0-9]/g,'');if(_0x5af595[_0x357c2f(0x1a0)]('0'))_0x2e5290['sPrUn'](_0x2e5290['TZmLu'],_0x2e5290[_0x357c2f(0x21a)])?_0x5af595=_0x2e5290['OjBHv'](_0x357c2f(0x1e5),_0x5af595[_0x357c2f(0x1d0)](0x1)):_0x1bceb3=_0x3d8626;else!_0x5af595[_0x357c2f(0x1a0)](_0x2e5290[_0x357c2f(0x225)])&&(_0x5af595=_0x2e5290['AFFtw']+_0x5af595);const _0x45caf7=process['env'][_0x357c2f(0x1b6)];!_0x45caf7&&(_0x2e5290[_0x357c2f(0x187)](_0x2e5290['EhArs'],_0x2e5290['EhArs'])?_0x2e5290['foqUN'](_0x2e5290[_0x357c2f(0x1a7)](_0x3e0ffe,_0x15c935[_0x357c2f(0x1cc)]),_0x5ad758)&&_0x3f2f8c[_0x357c2f(0x1eb)](_0x44f502):console[_0x357c2f(0x1f8)](_0x2e5290[_0x357c2f(0x196)]));try{const _0x3a8ce5=await lipana[_0x357c2f(0x1f1)][_0x357c2f(0x1ac)]({'phone':_0x5af595,'amount':_0x2e5290[_0x357c2f(0x19e)](Number,_0xc6f262),'callbackUrl':_0x45caf7}),_0x3da241=_0x3a8ce5[_0x357c2f(0x1ae)]||_0x3a8ce5['checkoutRequestID']||_0x3a8ce5['transactionId'];return pendingPayments['set'](_0x3da241,{'orderId':_0xa1ac9b,'phone':_0x5af595,'amount':_0xc6f262,'status':'pending','timestamp':Date[_0x357c2f(0x211)](),'customerJid':_0x347604,..._0x501ce1&&{'platform':_0x501ce1['platform'],'service':_0x501ce1[_0x357c2f(0x226)],'qty':_0x501ce1['qty'],'link':_0x501ce1['link']}}),{'success':!![],'reference':_0x3da241,'message':_0x2e5290[_0x357c2f(0x186)]};}catch(_0x4d0d92){return console[_0x357c2f(0x1da)](_0x357c2f(0x20b),_0x4d0d92),{'success':![],'error':_0x4d0d92[_0x357c2f(0x202)]||_0x2e5290[_0x357c2f(0x1e2)]};}}function a25_0x2e5d(){const _0x3d31ac=['sendMessage','COMPLETED','âŒ\x20FAILED','OHqAT','âœ…\x20Receipt\x20sent\x20to\x20customer:\x20','aToJW','\x0aâ”œâ”€\x20Reference:\x20','phone','LIPANA_SECRET_KEY','production','timestamp','search','KQeWp','\x0aâ”œâ”€\x20Service:\x20','substring','INwrq','set','330072pBbXMr','ZUozP','4oAUnIl','\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0a','MlmZw','âœ…\x20SUCCESS','env','error','EzMHB','\x0aâ”œâ”€\x20Amount:\x20','291064hoPgoL','\x0aâ”œâ”€\x20Date\x20&\x20Time:\x20','\x20mode','kEhNu','orderId','cOwWO','status','uzsJS','254','27Yzflkl','STK\x20Push\x20sent\x20successfully','mkRBG','254759424232@s.whatsapp.net','Unable\x20to\x20determine\x20customer\x20JID\x20for\x20receipt','delete','VZOrE','\x0aâ”œâ”€\x20Link:\x20','LIPANA_SECRET_KEY\x20not\x20set\x20-\x20payment\x20features\x20will\x20not\x20work','VUggQ','vcoaQ','transactions','AmqpH','VWuGX','HXXdY','get','VwjsA','KzCZC','warn','HwMis','amount','(((.+)+)+)+$','xCuPy','DTKAE','ezOyO','CTFaj','WSCPl','16618KbVcjL','message','Africa/Nairobi','VQNOh','MZNkP','âš ï¸\x20*ACTION:\x20Payment\x20failed\x20-\x20contact\x20customer\x20for\x20resolution*','prAyz','fccUZ','YVAso','exports','Lipana\x20STK\x20Push\x20Error:','RvPXg','TRduH','TRUE\x20âœ“','completedAt','Bot\x20socket\x20not\x20available\x20for\x20payment\x20verification\x20notification','now','4424370rSRUfo','failed','mpesaReceiptNumber','qSBNZ','uOYyY','@s.whatsapp.net','CtBov','OcmPi','TZmLu','completed','log','FaMBP','transactionId','Payment\x20system\x20not\x20configured','customerJid','\x0aâ”œâ”€\x20Payment\x20Status:\x20','â”œâ”€\x20Status:\x20âœ…\x20CONFIRMED\x0a\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0aâš¡\x20*What\x27s\x20Next?*\x0aYour\x20order\x20is\x20being\x20processed\x20and\x20will\x20be\x20delivered\x20within\x20a\x20few\x20minutes.\x0a\x0aðŸ“ž\x20*Need\x20Help?*\x0aContact\x20support:\x20254745282166\x20or\x20254759424232\x0a\x0aThank\x20you\x20for\x20your\x20business!\x20ðŸ™\x0a\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0aðŸ¤–\x20MADARA\x20UCHIHA\x20Bot','toISOString','VXNJv','AFFtw','service','paymentDetails','2451380iBhtIS','BsPpW','replace','PAYMENT_CALLBACK_URL\x20not\x20set\x20-\x20using\x20default\x20Lipana\x20callback\x20handling','Initializing\x20Lipana\x20in\x20','N/A','hqjvO','fycnC','Nwxte','aKnRI','LIPANA_ENV','DsDTh','Payment\x20system\x20not\x20configured.\x20Contact\x20admin\x20to\x20set\x20up\x20LIPANA_SECRET_KEY','EjQvQ','vPDAx','324906yQrmLT','366QQDHRg','raUds','vkfWO','â”œâ”€\x20M-PESA\x20Receipt:\x20','fOYex','@lipana/sdk','toString','pcpvs','oYuNu','/=\x20KES\x0aâ”œâ”€\x20Status:\x20','rJbDW','vsGkP','DNtEN','qty','gNOdG','DgUNO','aPkdy','935776fHvMIM','startsWith','link','bZkkw','KlMSK','stUtC','\x0aðŸ“¦\x20*Service\x20Details:*\x0aâ”œâ”€\x20Platform:\x20','mpesaRef','QNCXW','Qftel','constructor','/=\x20KES\x0aâ”œâ”€\x20Phone\x20Number:\x20','apply','initiateStkPush','kJkDS','workflowId','znLnR','en-KE','Failed\x20to\x20send\x20receipt\x20via\x20phone\x20number\x20JID','gkFDA','âš¡\x20*ACTION:\x20Payment\x20verified\x20-\x20proceed\x20with\x20service\x20delivery*','RRYDr','ZHQXT','PAYMENT_CALLBACK_URL','LrRwy','WGzBt','ilYPN','LonCx','success','gWoNn','DlCAm','FALSE\x20âœ—','query','ZgAyP','\x0a\x0aðŸ’³\x20*Payment\x20Summary:*\x0aâ”œâ”€\x20Amount\x20Paid:\x20'];a25_0x2e5d=function(){return _0x3d31ac;};return a25_0x2e5d();}function getPendingPayment(_0x959195){return pendingPayments['get'](_0x959195);}async function updatePaymentStatus(_0x7d812b,_0x2a1a2e,_0x3d65d9={}){const _0xe519e1=a25_0x585bc7,_0x577ced={'CtBov':function(_0x4daf90,_0x3b7ddc){return _0x4daf90*_0x3b7ddc;},'znLnR':function(_0x4b072d,_0x373a74){return _0x4b072d>_0x373a74;},'VWuGX':function(_0x1786b8,_0x5797c3){return _0x1786b8-_0x5797c3;},'VwjsA':function(_0x4c6a68,_0x70fe0b){return _0x4c6a68!==_0x70fe0b;},'DgUNO':_0xe519e1(0x1ef),'HXXdY':_0xe519e1(0x1bb),'LrRwy':function(_0x5b468a,_0x27eb72){return _0x5b468a===_0x27eb72;},'zpSoY':_0xe519e1(0x21b)},_0x4f2824=pendingPayments[_0xe519e1(0x1f5)](_0x7d812b);if(_0x4f2824){if(_0x577ced[_0xe519e1(0x1f6)](_0x577ced[_0xe519e1(0x19d)],_0x577ced[_0xe519e1(0x19d)])){const _0x4280a5=_0x35f965[_0xe519e1(0x211)](),_0x6aff8=_0x577ced[_0xe519e1(0x218)](_0x577ced[_0xe519e1(0x218)](0xa,0x3c),0x3e8);for(const [_0x2849e3,_0x272361]of _0x54256c){_0x577ced[_0xe519e1(0x1af)](_0x577ced[_0xe519e1(0x1f3)](_0x4280a5,_0x272361[_0xe519e1(0x1cc)]),_0x6aff8)&&_0x3ac1b9[_0xe519e1(0x1eb)](_0x2849e3);}}else _0x4f2824['status']=_0x2a1a2e,_0x4f2824['completedAt']=Date[_0xe519e1(0x211)](),_0x4f2824[_0xe519e1(0x227)]=_0x3d65d9,pendingPayments[_0xe519e1(0x1d2)](_0x7d812b,_0x4f2824),(_0x2a1a2e===_0x577ced[_0xe519e1(0x1f4)]||_0x577ced[_0xe519e1(0x1b7)](_0x2a1a2e,_0x577ced['zpSoY']))&&await sendPaymentVerificationToAdmin(_0x4f2824,_0x7d812b,_0x3d65d9);}}async function sendPaymentVerificationToAdmin(_0x266ddb,_0x4ad19b,_0x6da3b4){const _0x51473e=a25_0x585bc7,_0x28ffe4={'rJbDW':_0x51473e(0x21f),'xCuPy':_0x51473e(0x1ee),'HwMis':_0x51473e(0x1fb),'fOYex':_0x51473e(0x1b0),'kEhNu':_0x51473e(0x203),'CTFaj':function(_0x5579a3,_0x11b066){return _0x5579a3===_0x11b066;},'BsPpW':'success','TRduH':function(_0x3e8ca7,_0xbb4ff7){return _0x3e8ca7===_0xbb4ff7;},'ZgAyP':_0x51473e(0x21b),'ilYPN':_0x51473e(0x1d8),'mkRBG':_0x51473e(0x1c4),'KQeWp':function(_0x3a3bc8,_0x306a05){return _0x3a3bc8===_0x306a05;},'VZOrE':_0x51473e(0x183),'fycnC':_0x51473e(0x20e),'Ffyvf':_0x51473e(0x1be),'rWNee':function(_0x263f73,_0x287ebe){return _0x263f73===_0x287ebe;},'EzMHB':_0x51473e(0x1b3),'jYbIj':_0x51473e(0x206),'ezOyO':function(_0x24a06e,_0x46d19f){return _0x24a06e!==_0x46d19f;},'uOYyY':_0x51473e(0x20c),'OHqAT':_0x51473e(0x19a),'raUds':function(_0x29ada4,_0x2c8ea4,_0x281403,_0x3e2e03){return _0x29ada4(_0x2c8ea4,_0x281403,_0x3e2e03);},'vkfWO':function(_0x4c1ac3,_0x1979eb){return _0x4c1ac3===_0x1979eb;},'WSCPl':_0x51473e(0x208)};if(!botSocket){console[_0x51473e(0x1da)](_0x51473e(0x210));return;}const _0xf39b06=new Date()['toLocaleString'](_0x28ffe4[_0x51473e(0x192)],{'timeZone':_0x28ffe4[_0x51473e(0x1e0)]}),_0xc23554=_0x28ffe4[_0x51473e(0x1ff)](_0x266ddb[_0x51473e(0x1e3)],_0x28ffe4['BsPpW'])||_0x28ffe4[_0x51473e(0x20d)](_0x266ddb[_0x51473e(0x1e3)],_0x28ffe4[_0x51473e(0x1c0)])?_0x28ffe4[_0x51473e(0x1b9)]:_0x28ffe4[_0x51473e(0x1e8)],_0x5c87ef=_0x266ddb['status']===_0x28ffe4[_0x51473e(0x229)]||_0x28ffe4['KQeWp'](_0x266ddb[_0x51473e(0x1e3)],_0x28ffe4[_0x51473e(0x1c0)])?'âœ…':'âŒ',_0x5d6b87=_0x5c87ef+'\x20*PAYMENT\x20VERIFICATION*\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0aðŸ“‹\x20*Transaction\x20Details:*\x0aâ”œâ”€\x20Order\x20ID:\x20'+(_0x266ddb['orderId']||_0x28ffe4[_0x51473e(0x1ec)])+_0x51473e(0x1c8)+_0x4ad19b+'\x0aâ”œâ”€\x20Time:\x20'+_0xf39b06+'\x0a\x0aðŸ’³\x20*Payment\x20Information:*\x0aâ”œâ”€\x20Phone:\x20'+_0x266ddb[_0x51473e(0x1c9)]+_0x51473e(0x1dc)+_0x266ddb[_0x51473e(0x1fa)]+_0x51473e(0x197)+_0xc23554+_0x51473e(0x221)+(_0x28ffe4[_0x51473e(0x1ce)](_0x266ddb[_0x51473e(0x1e3)],_0x51473e(0x1bb))||_0x28ffe4[_0x51473e(0x1ff)](_0x266ddb[_0x51473e(0x1e3)],_0x28ffe4[_0x51473e(0x1c0)])?_0x28ffe4[_0x51473e(0x185)]:_0x28ffe4['Ffyvf'])+'\x0a\x0a'+(_0x6da3b4['transactionId']?'â”œâ”€\x20Transaction\x20ID:\x20'+_0x6da3b4[_0x51473e(0x21e)]+'\x0a':'')+(_0x6da3b4['mpesaRef']?'â”œâ”€\x20M-PESA\x20Ref:\x20'+_0x6da3b4['mpesaRef']+'\x0a':'')+(_0x266ddb['platform']?_0x51473e(0x1a5)+_0x266ddb['platform']+_0x51473e(0x1cf)+_0x266ddb[_0x51473e(0x19b)]+'\x20'+_0x266ddb[_0x51473e(0x226)]+_0x51473e(0x1ed)+_0x266ddb[_0x51473e(0x1a1)]+'\x0a':'')+_0x51473e(0x1d6)+(_0x28ffe4['rWNee'](_0x266ddb[_0x51473e(0x1e3)],_0x51473e(0x1bb))||_0x28ffe4[_0x51473e(0x1ff)](_0x266ddb[_0x51473e(0x1e3)],_0x28ffe4[_0x51473e(0x1c0)])?_0x28ffe4[_0x51473e(0x1db)]:_0x28ffe4['jYbIj'])+'\x0a\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0aðŸ¤–\x20MADARA\x20UCHIHA\x20Payment\x20System';try{for(const _0x2b3cc5 of ADMIN_NUMBERS){if(_0x28ffe4[_0x51473e(0x1fe)](_0x28ffe4['uOYyY'],_0x28ffe4[_0x51473e(0x216)]))throw new _0x45aab4(_0x28ffe4[_0x51473e(0x198)]);else await botSocket[_0x51473e(0x1c2)](_0x2b3cc5,{'text':_0x5d6b87}),console[_0x51473e(0x21c)]('âœ…\x20Payment\x20verification\x20sent\x20to\x20admin:\x20'+_0x2b3cc5);}if(_0x28ffe4[_0x51473e(0x20d)](_0x266ddb[_0x51473e(0x1e3)],_0x51473e(0x1bb))||_0x28ffe4[_0x51473e(0x20d)](_0x266ddb[_0x51473e(0x1e3)],_0x28ffe4['ZgAyP'])){if(_0x28ffe4['ezOyO'](_0x28ffe4[_0x51473e(0x1c5)],_0x28ffe4[_0x51473e(0x1c5)]))return _0xc83679[_0x51473e(0x1f8)](_0x28ffe4[_0x51473e(0x1fc)]),null;else await _0x28ffe4[_0x51473e(0x18f)](sendCustomerReceipt,_0x266ddb,_0x4ad19b,_0x6da3b4);}}catch(_0x59517c){if(_0x28ffe4[_0x51473e(0x190)](_0x28ffe4[_0x51473e(0x200)],_0x28ffe4[_0x51473e(0x200)]))console[_0x51473e(0x1da)]('Error\x20sending\x20payment\x20verification\x20to\x20admin:',_0x59517c);else return _0x27d641[_0x51473e(0x194)]()[_0x51473e(0x1cd)](VJapoA[_0x51473e(0x1f9)])['toString']()[_0x51473e(0x1a9)](_0xdeaf3b)['search'](_0x51473e(0x1fb));}}async function sendCustomerReceipt(_0x142d2a,_0x27ab45,_0xd63ab1){const _0x4a4ce0=a25_0x585bc7,_0xce4401={'FaMBP':function(_0x5af479,_0x40229d){return _0x5af479+_0x40229d;},'MZNkP':_0x4a4ce0(0x1e5),'ZHQXT':function(_0x3fc7a8,_0x469688){return _0x3fc7a8!==_0x469688;},'gNOdG':_0x4a4ce0(0x1ba),'RRYDr':'Bot\x20socket\x20not\x20available\x20for\x20customer\x20receipt','uzsJS':_0x4a4ce0(0x1b0),'QTVKE':_0x4a4ce0(0x203),'Qftel':function(_0x27d78a,_0x46c021){return _0x27d78a===_0x46c021;},'MlmZw':_0x4a4ce0(0x204),'gkFDA':_0x4a4ce0(0x1f7),'VXNJv':'N/A','INwrq':function(_0x203f8c,_0x2c97c4){return _0x203f8c===_0x2c97c4;},'AmqpH':_0x4a4ce0(0x209),'pcpvs':_0x4a4ce0(0x1b1)};if(!botSocket){if(_0xce4401[_0x4a4ce0(0x1b5)](_0xce4401[_0x4a4ce0(0x19c)],_0xce4401[_0x4a4ce0(0x19c)]))throw new _0x46742d(_0x4a4ce0(0x18a));else{console[_0x4a4ce0(0x1da)](_0xce4401[_0x4a4ce0(0x1b4)]);return;}}const _0x653fda=new Date()['toLocaleString'](_0xce4401[_0x4a4ce0(0x1e4)],{'timeZone':_0xce4401['QTVKE']});let _0x26d73a=_0x142d2a[_0x4a4ce0(0x220)];if(!_0x26d73a&&_0x142d2a[_0x4a4ce0(0x1c9)]){if(_0xce4401[_0x4a4ce0(0x1a8)](_0xce4401[_0x4a4ce0(0x1d7)],_0xce4401[_0x4a4ce0(0x1b2)])){_0x28509a[_0x4a4ce0(0x1da)](_0x4a4ce0(0x1ea));return;}else _0x26d73a=_0x142d2a[_0x4a4ce0(0x1c9)]+_0x4a4ce0(0x217);}if(!_0x26d73a){console[_0x4a4ce0(0x1da)]('Unable\x20to\x20determine\x20customer\x20JID\x20for\x20receipt');return;}const _0x74fa72='âœ…\x20*PAYMENT\x20CONFIRMED\x20-\x20RECEIPT*\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0aðŸŽ‰\x20*Your\x20payment\x20has\x20been\x20successfully\x20received!*\x0a\x0aðŸ“‹\x20*Receipt\x20Details:*\x0aâ”œâ”€\x20Order\x20ID:\x20'+(_0x142d2a[_0x4a4ce0(0x1e1)]||_0xce4401[_0x4a4ce0(0x224)])+'\x0aâ”œâ”€\x20Transaction\x20Ref:\x20'+_0x27ab45+_0x4a4ce0(0x1de)+_0x653fda+_0x4a4ce0(0x1c1)+_0x142d2a[_0x4a4ce0(0x1fa)]+_0x4a4ce0(0x1aa)+_0x142d2a['phone']+'\x0a'+(_0xd63ab1[_0x4a4ce0(0x1a6)]?_0x4a4ce0(0x191)+_0xd63ab1['mpesaRef']+'\x0a':'')+(_0xd63ab1[_0x4a4ce0(0x21e)]?'â”œâ”€\x20Transaction\x20ID:\x20'+_0xd63ab1[_0x4a4ce0(0x21e)]+'\x0a':'')+_0x4a4ce0(0x222);try{_0xce4401[_0x4a4ce0(0x1d1)](_0xce4401[_0x4a4ce0(0x1f2)],_0xce4401[_0x4a4ce0(0x1f2)])?(await botSocket[_0x4a4ce0(0x1c2)](_0x26d73a,{'text':_0x74fa72}),console[_0x4a4ce0(0x21c)](_0x4a4ce0(0x1c6)+_0x26d73a)):_0x652e6f=_0xce4401[_0x4a4ce0(0x21d)](_0xce4401[_0x4a4ce0(0x205)],_0x355b0d);}catch(_0x4bc249){console[_0x4a4ce0(0x1da)]('Error\x20sending\x20receipt\x20to\x20customer:',_0x4bc249),console[_0x4a4ce0(0x21c)](_0xce4401[_0x4a4ce0(0x195)]);}}async function verifyPayment(_0x12aefc){const _0x2c1bf2=a25_0x585bc7,_0x1fc19e={'aToJW':'Bot\x20socket\x20not\x20available\x20for\x20customer\x20receipt','vsGkP':function(_0x9f7cd4){return _0x9f7cd4();},'OcmPi':function(_0x494198,_0x5790a5){return _0x494198===_0x5790a5;},'OydtS':_0x2c1bf2(0x1c3),'hqjvO':_0x2c1bf2(0x1bb),'prAyz':function(_0x132812,_0x27d14d,_0x112745,_0x241955){return _0x132812(_0x27d14d,_0x112745,_0x241955);},'vcoaQ':_0x2c1bf2(0x213),'gWoNn':_0x2c1bf2(0x215)};!lipana&&(lipana=_0x1fc19e[_0x2c1bf2(0x199)](initLipana));if(!lipana)throw new Error(_0x2c1bf2(0x21f));try{const _0x1edbef=await lipana[_0x2c1bf2(0x1f1)][_0x2c1bf2(0x1bf)]({'reference':_0x12aefc}),_0x1bdc1e={'transactionId':_0x1edbef[_0x2c1bf2(0x21e)]||_0x1edbef['id'],'mpesaRef':_0x1edbef[_0x2c1bf2(0x214)]||_0x1edbef['receiptNumber'],'amount':_0x1edbef[_0x2c1bf2(0x1fa)],'status':_0x1edbef[_0x2c1bf2(0x1e3)],'completedAt':_0x1edbef[_0x2c1bf2(0x20f)]||new Date()[_0x2c1bf2(0x223)]()},_0x33648a=_0x1fc19e[_0x2c1bf2(0x219)](_0x1edbef[_0x2c1bf2(0x1e3)],'SUCCESS')||_0x1fc19e[_0x2c1bf2(0x219)](_0x1edbef[_0x2c1bf2(0x1e3)],_0x1fc19e['OydtS'])||_0x1fc19e['OcmPi'](_0x1edbef['status'],_0x1fc19e[_0x2c1bf2(0x184)]);return await _0x1fc19e[_0x2c1bf2(0x207)](updatePaymentStatus,_0x12aefc,_0x33648a?_0x1fc19e['hqjvO']:_0x1fc19e[_0x2c1bf2(0x1f0)],_0x1bdc1e),{'success':_0x33648a,'details':_0x1bdc1e};}catch(_0x2fd259){if(_0x1fc19e[_0x2c1bf2(0x1bc)]!==_0x2c1bf2(0x215)){_0xa6adde[_0x2c1bf2(0x1da)](_0x1fc19e[_0x2c1bf2(0x1c7)]);return;}else return console['error']('Payment\x20verification\x20error:',_0x2fd259),{'success':![],'error':_0x2fd259[_0x2c1bf2(0x202)]};}}function clearExpiredPayments(){const _0x33b6a8=a25_0x585bc7,_0x332be0={'kJkDS':function(_0x32de29,_0x5818be){return _0x32de29*_0x5818be;},'lCQWD':function(_0x284ecb,_0x3bf146){return _0x284ecb>_0x3bf146;},'ZUozP':function(_0x3d34a0,_0xc427be){return _0x3d34a0-_0xc427be;}},_0x3df604=Date[_0x33b6a8(0x211)](),_0x20df0f=_0x332be0[_0x33b6a8(0x1ad)](_0x332be0[_0x33b6a8(0x1ad)](0xa,0x3c),0x3e8);for(const [_0x515c0c,_0x499142]of pendingPayments){_0x332be0['lCQWD'](_0x332be0[_0x33b6a8(0x1d4)](_0x3df604,_0x499142[_0x33b6a8(0x1cc)]),_0x20df0f)&&pendingPayments[_0x33b6a8(0x1eb)](_0x515c0c);}}setInterval(clearExpiredPayments,0xea60),module[a25_0x585bc7(0x20a)]={'initiateSTKPush':initiateSTKPush,'getPendingPayment':getPendingPayment,'updatePaymentStatus':updatePaymentStatus,'verifyPayment':verifyPayment,'setBotSocket':setBotSocket,'pendingPayments':pendingPayments,'sendCustomerReceipt':sendCustomerReceipt};