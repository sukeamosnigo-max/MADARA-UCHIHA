const a25_0x2905b1=a25_0x26aa;(function(_0x564368,_0x5a92a9){const _0x2e1913=a25_0x26aa,_0x4ccd1c=_0x564368();while(!![]){try{const _0x51fcb8=-parseInt(_0x2e1913(0x118))/0x1+-parseInt(_0x2e1913(0x120))/0x2*(parseInt(_0x2e1913(0x103))/0x3)+parseInt(_0x2e1913(0xf5))/0x4+-parseInt(_0x2e1913(0x106))/0x5*(parseInt(_0x2e1913(0x10e))/0x6)+-parseInt(_0x2e1913(0x12d))/0x7*(parseInt(_0x2e1913(0x114))/0x8)+-parseInt(_0x2e1913(0x105))/0x9+parseInt(_0x2e1913(0x154))/0xa*(parseInt(_0x2e1913(0x13e))/0xb);if(_0x51fcb8===_0x5a92a9)break;else _0x4ccd1c['push'](_0x4ccd1c['shift']());}catch(_0x26d4c3){_0x4ccd1c['push'](_0x4ccd1c['shift']());}}}(a25_0x1f1c,0x1958f));const {Lipana}=require(a25_0x2905b1(0x10b));let lipana=null,botSocket=null;const ADMIN_NUMBERS=[a25_0x2905b1(0xf0),'254759424232@s.whatsapp.net'];function setBotSocket(_0x333701){botSocket=_0x333701;}function initLipana(){const _0x36b26d=a25_0x2905b1,_0x3cb661={'ojbws':'Failed\x20to\x20send\x20receipt\x20via\x20phone\x20number\x20JID','IvpCg':function(_0x1eb4be,_0x3590d5){return _0x1eb4be!==_0x3590d5;},'zFlAl':_0x36b26d(0xe2),'IwMzZ':'aNrUg','Debsx':_0x36b26d(0x141),'OPRxd':function(_0x5427d2,_0x89e408,_0x30dc8a){return _0x5427d2(_0x89e408,_0x30dc8a);},'tLVKM':_0x36b26d(0xd9),'CmBhb':function(_0xef32bf,_0xfb990c){return _0xef32bf===_0xfb990c;},'GsxPu':'sandbox','RCbrP':'production'},_0x5d2071=(function(){let _0x186ef5=!![];return function(_0xab7b13,_0x18eef4){const _0xc31ebf=_0x186ef5?function(){const _0x503f8a=a25_0x26aa;if(_0x18eef4){const _0x3e048a=_0x18eef4[_0x503f8a(0xda)](_0xab7b13,arguments);return _0x18eef4=null,_0x3e048a;}}:function(){};return _0x186ef5=![],_0xc31ebf;};}()),_0x140bff=_0x3cb661[_0x36b26d(0xee)](_0x5d2071,this,function(){const _0xf27cb5=_0x36b26d;if(_0x3cb661['IvpCg'](_0x3cb661[_0xf27cb5(0x13b)],_0x3cb661[_0xf27cb5(0xbb)]))return _0x140bff[_0xf27cb5(0x12f)]()[_0xf27cb5(0x119)]('(((.+)+)+)+$')[_0xf27cb5(0x12f)]()['constructor'](_0x140bff)[_0xf27cb5(0x119)](_0x3cb661['Debsx']);else _0x96d455[_0xf27cb5(0x104)](_0xf27cb5(0x14c),_0x2f618b),_0x255450['log'](_0x3cb661[_0xf27cb5(0x113)]);});_0x140bff();if(!process[_0x36b26d(0xd5)][_0x36b26d(0xd6)])return console[_0x36b26d(0x127)](_0x3cb661['tLVKM']),null;const _0x4ee0e8=_0x3cb661[_0x36b26d(0x11c)](process[_0x36b26d(0xd5)]['LIPANA_ENV'],_0x3cb661[_0x36b26d(0xbf)])?_0x3cb661[_0x36b26d(0xbf)]:_0x3cb661[_0x36b26d(0x147)];return console['log'](_0x36b26d(0x14d)+_0x4ee0e8+_0x36b26d(0x138)),new Lipana({'apiKey':process[_0x36b26d(0xd5)]['LIPANA_SECRET_KEY'],'environment':_0x4ee0e8});}function a25_0x26aa(_0x2d0ef3,_0x32262a){_0x2d0ef3=_0x2d0ef3-0xae;const _0x4fcadd=a25_0x1f1c();let _0x359cb1=_0x4fcadd[_0x2d0ef3];return _0x359cb1;}lipana=initLipana();const pendingPayments=new Map();async function initiateSTKPush(_0x354509,_0x5be61e,_0x9de0ed,_0x41ebcb=null,_0x44c44a=null){const _0x263002=a25_0x2905b1,_0x549a63={'YroHX':_0x263002(0xbd),'BOHGf':_0x263002(0xe7),'Dsncx':'PAYMENT_CALLBACK_URL\x20not\x20set\x20-\x20using\x20default\x20Lipana\x20callback\x20handling','etUNL':function(_0x4a4e81){return _0x4a4e81();},'nobKY':'Payment\x20system\x20not\x20configured.\x20Contact\x20admin\x20to\x20set\x20up\x20LIPANA_SECRET_KEY','hAqmX':_0x263002(0x157),'tzxul':'254','zmqiz':_0x263002(0x152),'pMQPj':function(_0x25f4bc,_0x370209){return _0x25f4bc+_0x370209;},'OfJfU':function(_0x5467fb,_0x47f3f7){return _0x5467fb!==_0x47f3f7;},'zVrQJ':_0x263002(0x12a),'WhJcu':_0x263002(0x12e),'VeIKi':function(_0x3123a6,_0x54381d){return _0x3123a6===_0x54381d;},'MmGhS':_0x263002(0xbc),'cYdvp':function(_0x186ba9,_0x26d67d){return _0x186ba9(_0x26d67d);},'NylQP':_0x263002(0x128),'cyavK':function(_0xa677ea,_0x1aa40e){return _0xa677ea&&_0x1aa40e;},'IpltD':_0x263002(0x13d),'tKIoJ':function(_0x5b805b,_0x55b748){return _0x5b805b!==_0x55b748;},'tuLkw':'xBrAR','sFuNn':_0x263002(0x112),'Xihqw':_0x263002(0x150)};!lipana&&(lipana=_0x549a63[_0x263002(0xcc)](initLipana));if(!lipana)throw new Error(_0x549a63[_0x263002(0xb8)]);let _0x434ca9=_0x354509[_0x263002(0x12f)]()[_0x263002(0xb9)](/\s+/g,'')[_0x263002(0xb9)](/[^0-9]/g,'');if(_0x434ca9[_0x263002(0x115)]('0')){if(_0x263002(0x157)===_0x549a63[_0x263002(0x11a)])_0x434ca9=_0x549a63[_0x263002(0xb2)]+_0x434ca9[_0x263002(0xd8)](0x1);else{_0x5d0334[_0x263002(0x104)](_0x549a63[_0x263002(0x108)]);return;}}else{if(!_0x434ca9[_0x263002(0x115)](_0x549a63[_0x263002(0xb2)])){if(_0x263002(0x152)!==_0x549a63[_0x263002(0x15a)]){_0x5a19b2[_0x263002(0x104)](_0x263002(0x122));return;}else _0x434ca9=_0x549a63[_0x263002(0x11b)](_0x549a63['tzxul'],_0x434ca9);}}const _0x3335ef=process[_0x263002(0xd5)][_0x263002(0x11e)];if(!_0x3335ef){if(_0x549a63['OfJfU'](_0x549a63[_0x263002(0xb7)],_0x549a63[_0x263002(0xeb)]))console[_0x263002(0x127)](_0x549a63['Dsncx']);else{_0x577966['error'](_0x549a63[_0x263002(0x129)]);return;}}try{if(_0x549a63['VeIKi'](_0x549a63[_0x263002(0xf4)],_0x549a63[_0x263002(0xf4)])){const _0x3529bc=await lipana['transactions'][_0x263002(0x102)]({'phone':_0x434ca9,'amount':_0x549a63[_0x263002(0x14e)](Number,_0x5be61e),'callbackUrl':_0x3335ef}),_0x3739b8=_0x3529bc['workflowId']||_0x3529bc[_0x263002(0x15e)]||_0x3529bc[_0x263002(0xdd)];return pendingPayments['set'](_0x3739b8,{'orderId':_0x9de0ed,'phone':_0x434ca9,'amount':_0x5be61e,'status':_0x549a63[_0x263002(0x14b)],'timestamp':Date[_0x263002(0x15b)](),'customerJid':_0x41ebcb,..._0x549a63['cyavK'](_0x44c44a,{'platform':_0x44c44a[_0x263002(0x13a)],'service':_0x44c44a[_0x263002(0x10f)],'qty':_0x44c44a[_0x263002(0x101)],'link':_0x44c44a[_0x263002(0x145)]})}),{'success':!![],'reference':_0x3739b8,'message':_0x549a63['IpltD']};}else _0x3a9c23[_0x263002(0x127)](_0x549a63[_0x263002(0x137)]);}catch(_0x113e2e){if(_0x549a63[_0x263002(0x133)](_0x549a63['tuLkw'],_0x549a63[_0x263002(0xca)]))return console[_0x263002(0x104)](_0x549a63[_0x263002(0x125)],_0x113e2e),{'success':![],'error':_0x113e2e[_0x263002(0xc1)]||_0x263002(0x156)};else{const _0x24caa8=_0xd391d0?function(){const _0x506af2=_0x263002;if(_0x305396){const _0x40bd32=_0x57f6f5[_0x506af2(0xda)](_0x3d8bd5,arguments);return _0xca4513=null,_0x40bd32;}}:function(){};return _0x55ad7f=![],_0x24caa8;}}}function getPendingPayment(_0x41fd3d){const _0x1ca17f=a25_0x2905b1;return pendingPayments[_0x1ca17f(0xce)](_0x41fd3d);}async function updatePaymentStatus(_0x46ad84,_0x480c0b,_0x48a911={}){const _0x5cf840=a25_0x2905b1,_0x495321={'Rdtgm':_0x5cf840(0xd9),'LBPCa':_0x5cf840(0xaf),'cBVcs':_0x5cf840(0x111),'tTlwy':function(_0x5c435c,_0x292faa){return _0x5c435c===_0x292faa;},'LXPVm':_0x5cf840(0xe0),'VdADK':_0x5cf840(0xff),'QWfZR':function(_0x1fbdb5,_0x3cebb6,_0x2af7d3,_0x45cc17){return _0x1fbdb5(_0x3cebb6,_0x2af7d3,_0x45cc17);}},_0x556965=pendingPayments[_0x5cf840(0xce)](_0x46ad84);if(_0x556965){if(_0x495321[_0x5cf840(0xc5)]===_0x495321[_0x5cf840(0xc5)]){const _0x2fe7ff=_0x495321['cBVcs'][_0x5cf840(0xcd)]('|');let _0x1a464d=0x0;while(!![]){switch(_0x2fe7ff[_0x1a464d++]){case'0':(_0x495321[_0x5cf840(0xef)](_0x480c0b,_0x495321['LXPVm'])||_0x495321[_0x5cf840(0xef)](_0x480c0b,_0x495321[_0x5cf840(0xc6)]))&&await _0x495321['QWfZR'](sendPaymentVerificationToAdmin,_0x556965,_0x46ad84,_0x48a911);continue;case'1':_0x556965['paymentDetails']=_0x48a911;continue;case'2':_0x556965[_0x5cf840(0xde)]=_0x480c0b;continue;case'3':pendingPayments[_0x5cf840(0xe8)](_0x46ad84,_0x556965);continue;case'4':_0x556965[_0x5cf840(0xcf)]=Date[_0x5cf840(0x15b)]();continue;}break;}}else return _0x3b027d[_0x5cf840(0x127)](_0x495321[_0x5cf840(0x110)]),null;}}async function sendPaymentVerificationToAdmin(_0x38c2b6,_0xb8aa96,_0x221573){const _0x5f1a2d=a25_0x2905b1,_0x1c7116={'CoqnH':function(_0x4bf97d,_0x2725dc){return _0x4bf97d>_0x2725dc;},'cQkBE':_0x5f1a2d(0x122),'MRCRJ':_0x5f1a2d(0xf9),'udRXW':'Africa/Nairobi','srUHB':_0x5f1a2d(0xe0),'djdkW':function(_0x127ead,_0x321e57){return _0x127ead===_0x321e57;},'FWgWY':_0x5f1a2d(0xff),'sUGgU':_0x5f1a2d(0xf7),'cjySd':_0x5f1a2d(0xb4),'fHEgX':function(_0x55e03e,_0x240a95){return _0x55e03e===_0x240a95;},'fljKD':_0x5f1a2d(0xc4),'inhFB':_0x5f1a2d(0x15d),'jNMrN':_0x5f1a2d(0xdf),'FhteO':function(_0x2be7e2,_0x575446){return _0x2be7e2===_0x575446;},'qMiQe':_0x5f1a2d(0x126),'Zalfy':function(_0x4ddbbc,_0x157df1){return _0x4ddbbc===_0x157df1;},'YnDbU':function(_0x2faab5,_0x20ccc9,_0x2fb965,_0x276891){return _0x2faab5(_0x20ccc9,_0x2fb965,_0x276891);},'smKaj':'Error\x20sending\x20payment\x20verification\x20to\x20admin:'};if(!botSocket){console[_0x5f1a2d(0x104)](_0x1c7116['cQkBE']);return;}const _0x2eb544=new Date()[_0x5f1a2d(0x130)](_0x1c7116[_0x5f1a2d(0x14f)],{'timeZone':_0x1c7116[_0x5f1a2d(0xe3)]}),_0x14c5ee=_0x38c2b6[_0x5f1a2d(0xde)]===_0x1c7116[_0x5f1a2d(0xd4)]||_0x1c7116[_0x5f1a2d(0x151)](_0x38c2b6[_0x5f1a2d(0xde)],_0x1c7116['FWgWY'])?_0x1c7116[_0x5f1a2d(0x139)]:_0x1c7116[_0x5f1a2d(0x107)],_0x1b7030=_0x1c7116[_0x5f1a2d(0xc7)](_0x38c2b6[_0x5f1a2d(0xde)],_0x1c7116[_0x5f1a2d(0xd4)])||_0x38c2b6[_0x5f1a2d(0xde)]===_0x1c7116[_0x5f1a2d(0x143)]?'âœ…':'âŒ',_0x409b6d=_0x1b7030+'\x20*PAYMENT\x20VERIFICATION*\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0aðŸ“‹\x20*Transaction\x20Details:*\x0aâ”œâ”€\x20Order\x20ID:\x20'+(_0x38c2b6['orderId']||_0x5f1a2d(0x12c))+_0x5f1a2d(0xe6)+_0xb8aa96+_0x5f1a2d(0xec)+_0x2eb544+'\x0a\x0aðŸ’³\x20*Payment\x20Information:*\x0aâ”œâ”€\x20Phone:\x20'+_0x38c2b6[_0x5f1a2d(0xd1)]+_0x5f1a2d(0xfc)+_0x38c2b6[_0x5f1a2d(0x144)]+'/=\x20KES\x0aâ”œâ”€\x20Status:\x20'+_0x14c5ee+'\x0aâ”œâ”€\x20Payment\x20Status:\x20'+(_0x38c2b6[_0x5f1a2d(0xde)]===_0x1c7116['srUHB']||_0x1c7116['djdkW'](_0x38c2b6[_0x5f1a2d(0xde)],_0x1c7116[_0x5f1a2d(0x143)])?_0x1c7116['fljKD']:_0x5f1a2d(0xb5))+'\x0a\x0a'+(_0x221573[_0x5f1a2d(0xdd)]?'â”œâ”€\x20Transaction\x20ID:\x20'+_0x221573[_0x5f1a2d(0xdd)]+'\x0a':'')+(_0x221573[_0x5f1a2d(0x11d)]?_0x5f1a2d(0xf3)+_0x221573[_0x5f1a2d(0x11d)]+'\x0a':'')+(_0x38c2b6[_0x5f1a2d(0x13a)]?_0x5f1a2d(0x135)+_0x38c2b6[_0x5f1a2d(0x13a)]+_0x5f1a2d(0x15c)+_0x38c2b6[_0x5f1a2d(0x101)]+'\x20'+_0x38c2b6[_0x5f1a2d(0x10f)]+_0x5f1a2d(0xd0)+_0x38c2b6['link']+'\x0a':'')+'\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0a'+(_0x1c7116['fHEgX'](_0x38c2b6[_0x5f1a2d(0xde)],_0x1c7116[_0x5f1a2d(0xd4)])||_0x1c7116[_0x5f1a2d(0xc7)](_0x38c2b6[_0x5f1a2d(0xde)],_0x1c7116[_0x5f1a2d(0x143)])?_0x1c7116[_0x5f1a2d(0x10a)]:_0x1c7116[_0x5f1a2d(0x162)])+_0x5f1a2d(0x13c);try{for(const _0x413079 of ADMIN_NUMBERS){_0x1c7116[_0x5f1a2d(0xe4)](_0x1c7116[_0x5f1a2d(0xf8)],_0x5f1a2d(0xba))?_0x1c7116['CoqnH'](_0x51f0a0-_0x3fbf5c[_0x5f1a2d(0xcb)],_0x19974b)&&_0x3c0159[_0x5f1a2d(0xe1)](_0x353aa2):(await botSocket[_0x5f1a2d(0xed)](_0x413079,{'text':_0x409b6d}),console['log'](_0x5f1a2d(0x159)+_0x413079));}(_0x1c7116[_0x5f1a2d(0xc7)](_0x38c2b6[_0x5f1a2d(0xde)],_0x5f1a2d(0xe0))||_0x1c7116[_0x5f1a2d(0xd2)](_0x38c2b6['status'],_0x1c7116[_0x5f1a2d(0x143)]))&&await _0x1c7116[_0x5f1a2d(0x149)](sendCustomerReceipt,_0x38c2b6,_0xb8aa96,_0x221573);}catch(_0x192eec){console[_0x5f1a2d(0x104)](_0x1c7116[_0x5f1a2d(0x109)],_0x192eec);}}function a25_0x1f1c(){const _0x57935b=['startsWith','xYCzN','customerJid','203003uIoldK','search','hAqmX','pMQPj','CmBhb','mpesaRef','PAYMENT_CALLBACK_URL','MllJW','12714dyGWiI','Wbcpe','Bot\x20socket\x20not\x20available\x20for\x20payment\x20verification\x20notification','Payment\x20verification\x20error:','\x0aâ”œâ”€\x20Transaction\x20Ref:\x20','Xihqw','OuKpV','warn','pending','BOHGf','gEqub','â”œâ”€\x20M-PESA\x20Receipt:\x20','N/A','620081eXgVCm','xuyUr','toString','toLocaleString','RTWYZ','zPlRl','tKIoJ','mNBmr','\x0aðŸ“¦\x20*Service\x20Details:*\x0aâ”œâ”€\x20Platform:\x20','âœ…\x20*PAYMENT\x20CONFIRMED\x20-\x20RECEIPT*\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0aðŸŽ‰\x20*Your\x20payment\x20has\x20been\x20successfully\x20received!*\x0a\x0aðŸ“‹\x20*Receipt\x20Details:*\x0aâ”œâ”€\x20Order\x20ID:\x20','Dsncx','\x20mode','sUGgU','platform','zFlAl','\x0a\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0aðŸ¤–\x20MADARA\x20UCHIHA\x20Payment\x20System','STK\x20Push\x20sent\x20successfully','11UYdszh','VzDyC','WgfCx','(((.+)+)+)+$','ekaQK','FWgWY','amount','link','OLjyp','RCbrP','sGAPF','YnDbU','BSwst','NylQP','Error\x20sending\x20receipt\x20to\x20customer:','Initializing\x20Lipana\x20in\x20','cYdvp','MRCRJ','Lipana\x20STK\x20Push\x20Error:','djdkW','aHpAu','@s.whatsapp.net','6049410pFfGmF','dhgRi','Payment\x20initiation\x20failed','HCxLV','ecwmU','âœ…\x20Payment\x20verification\x20sent\x20to\x20admin:\x20','zmqiz','now','\x0aâ”œâ”€\x20Service:\x20','âš¡\x20*ACTION:\x20Payment\x20verified\x20-\x20proceed\x20with\x20service\x20delivery*','checkoutRequestID','orderId','unSNB','SlDgS','jNMrN','transactions','hImeJ','ZcDff','Payment\x20system\x20not\x20configured.\x20Contact\x20admin\x20to\x20set\x20up\x20LIPANA_SECRET_KEY','â”œâ”€\x20Status:\x20âœ…\x20CONFIRMED\x0a\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0a\x0aâš¡\x20*What\x27s\x20Next?*\x0aYour\x20order\x20is\x20being\x20processed\x20and\x20will\x20be\x20delivered\x20within\x20a\x20few\x20minutes.\x0a\x0aðŸ“ž\x20*Need\x20Help?*\x0aContact\x20support:\x20254745282166\x20or\x20254759424232\x0a\x0aThank\x20you\x20for\x20your\x20business!\x20ðŸ™\x0a\x0aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\x0aðŸ¤–\x20MADARA\x20UCHIHA\x20Bot','tzxul','TPFKu','âŒ\x20FAILED','FALSE\x20âœ—','log','zVrQJ','nobKY','replace','igcfo','IwMzZ','jgsrz','Bot\x20socket\x20not\x20available\x20for\x20customer\x20receipt','âœ…\x20Receipt\x20sent\x20to\x20customer:\x20','GsxPu','mpesaReceiptNumber','message','mMpnD','UdUFz','TRUE\x20âœ“','LBPCa','VdADK','fHEgX','COMPLETED','RgTKH','sFuNn','timestamp','etUNL','split','get','completedAt','\x0aâ”œâ”€\x20Link:\x20','phone','Zalfy','FHyte','srUHB','env','LIPANA_SECRET_KEY','query','substring','LIPANA_SECRET_KEY\x20not\x20set\x20-\x20payment\x20features\x20will\x20not\x20work','apply','Payment\x20system\x20not\x20configured','hopyG','transactionId','status','âš ï¸\x20*ACTION:\x20Payment\x20failed\x20-\x20contact\x20customer\x20for\x20resolution*','success','delete','DJveM','udRXW','FhteO','LVSWN','\x0aâ”œâ”€\x20Reference:\x20','Unable\x20to\x20determine\x20customer\x20JID\x20for\x20receipt','set','HShAx','GqNJJ','WhJcu','\x0aâ”œâ”€\x20Time:\x20','sendMessage','OPRxd','tTlwy','254745282166@s.whatsapp.net','Failed\x20to\x20send\x20receipt\x20via\x20phone\x20number\x20JID','MxXoR','â”œâ”€\x20M-PESA\x20Ref:\x20','MmGhS','213132lpWNxq','RvDPZ','âœ…\x20SUCCESS','qMiQe','en-KE','â”œâ”€\x20Transaction\x20ID:\x20','failed','\x0aâ”œâ”€\x20Amount:\x20','receiptNumber','Africa/Nairobi','completed','Error\x20sending\x20payment\x20verification\x20to\x20admin:','qty','initiateStkPush','6CycpWj','error','951363ZLhwQO','360985jNmaqw','cjySd','YroHX','smKaj','inhFB','@lipana/sdk','fwRJy','toISOString','12dbOKNJ','service','Rdtgm','2|4|1|3|0','JqPds','ojbws','8HNNnWE'];a25_0x1f1c=function(){return _0x57935b;};return a25_0x1f1c();}async function sendCustomerReceipt(_0x3962de,_0x2146ea,_0x12729f){const _0x4861d4=a25_0x2905b1,_0x20a510={'RvDPZ':function(_0x826e9f,_0x477efa){return _0x826e9f+_0x477efa;},'wlmkX':_0x4861d4(0x100),'ecwmU':function(_0x28fa4f,_0x4c7fa2){return _0x28fa4f!==_0x4c7fa2;},'ILRLt':_0x4861d4(0xdc),'SlDgS':_0x4861d4(0xbd),'sGAPF':'en-KE','TPFKu':_0x4861d4(0xfe),'UdUFz':'Qgfbj','Zffsk':_0x4861d4(0x132),'hImeJ':_0x4861d4(0xf2),'mNBmr':_0x4861d4(0xe7),'WgfCx':_0x4861d4(0x12c),'jlBnR':function(_0x5e96cb,_0x332ae7){return _0x5e96cb===_0x332ae7;},'ekaQK':_0x4861d4(0xc2),'dhgRi':'Error\x20sending\x20receipt\x20to\x20customer:','unSNB':_0x4861d4(0xf1)};if(!botSocket){if(_0x20a510[_0x4861d4(0x158)](_0x20a510['ILRLt'],_0x4861d4(0xc9))){console[_0x4861d4(0x104)](_0x20a510[_0x4861d4(0x161)]);return;}else _0x3abed6=_0x20a510[_0x4861d4(0xf6)]('254',_0x184109['substring'](0x1));}const _0x10b80f=new Date()[_0x4861d4(0x130)](_0x20a510[_0x4861d4(0x148)],{'timeZone':_0x20a510[_0x4861d4(0xb3)]});let _0x195029=_0x3962de[_0x4861d4(0x117)];!_0x195029&&_0x3962de['phone']&&(_0x20a510['UdUFz']!==_0x20a510[_0x4861d4(0xc3)]?_0x4ad7e0[_0x4861d4(0x104)](_0x20a510['wlmkX'],_0xcfa790):_0x195029=_0x3962de[_0x4861d4(0xd1)]+_0x4861d4(0x153));if(!_0x195029){if(_0x20a510['Zffsk']!==_0x20a510[_0x4861d4(0xae)]){console[_0x4861d4(0x104)](_0x20a510[_0x4861d4(0x134)]);return;}else{const _0x554840=_0x535cf1['apply'](_0x4a9d87,arguments);return _0x33e3a6=null,_0x554840;}}const _0x39054b=_0x4861d4(0x136)+(_0x3962de[_0x4861d4(0x15f)]||_0x20a510[_0x4861d4(0x140)])+_0x4861d4(0x124)+_0x2146ea+'\x0aâ”œâ”€\x20Date\x20&\x20Time:\x20'+_0x10b80f+'\x0a\x0aðŸ’³\x20*Payment\x20Summary:*\x0aâ”œâ”€\x20Amount\x20Paid:\x20'+_0x3962de['amount']+'/=\x20KES\x0aâ”œâ”€\x20Phone\x20Number:\x20'+_0x3962de[_0x4861d4(0xd1)]+'\x0a'+(_0x12729f[_0x4861d4(0x11d)]?_0x4861d4(0x12b)+_0x12729f[_0x4861d4(0x11d)]+'\x0a':'')+(_0x12729f[_0x4861d4(0xdd)]?_0x4861d4(0xfa)+_0x12729f[_0x4861d4(0xdd)]+'\x0a':'')+_0x4861d4(0xb1);try{await botSocket[_0x4861d4(0xed)](_0x195029,{'text':_0x39054b}),console[_0x4861d4(0xb6)](_0x4861d4(0xbe)+_0x195029);}catch(_0x10590d){_0x20a510['jlBnR'](_0x4861d4(0xc2),_0x20a510[_0x4861d4(0x142)])?(console[_0x4861d4(0x104)](_0x20a510[_0x4861d4(0x155)],_0x10590d),console['log'](_0x20a510[_0x4861d4(0x160)])):_0x2fb594=_0x69ed0d;}}async function verifyPayment(_0x10a9ca){const _0x2d5159=a25_0x2905b1,_0x331c28={'fwRJy':function(_0x53f477){return _0x53f477();},'VzDyC':_0x2d5159(0xb0),'BSwst':function(_0x6aedaf,_0x5852cb){return _0x6aedaf!==_0x5852cb;},'jcyhi':'MllJW','daAjJ':_0x2d5159(0xdb),'LVSWN':function(_0x553824,_0x1aa416){return _0x553824!==_0x1aa416;},'OLjyp':_0x2d5159(0x121),'HShAx':function(_0xfac75d,_0x35a760){return _0xfac75d===_0x35a760;},'FHyte':'success','eOAJo':function(_0x233889,_0x212396,_0x4f83d4,_0x3182ec){return _0x233889(_0x212396,_0x4f83d4,_0x3182ec);},'GqNJJ':_0x2d5159(0x116)};!lipana&&(_0x331c28[_0x2d5159(0x14a)](_0x2d5159(0x11f),_0x331c28['jcyhi'])?_0x56042d=_0x331c28['fwRJy'](_0x1e4456):lipana=_0x331c28[_0x2d5159(0x10c)](initLipana));if(!lipana)throw new Error(_0x331c28['daAjJ']);try{if(_0x331c28[_0x2d5159(0xe5)](_0x331c28[_0x2d5159(0x146)],_0x331c28['OLjyp']))throw new _0xa2a394(_0x331c28[_0x2d5159(0x13f)]);else{const _0x468b68=await lipana[_0x2d5159(0x163)][_0x2d5159(0xd7)]({'reference':_0x10a9ca}),_0x5e6e58={'transactionId':_0x468b68['transactionId']||_0x468b68['id'],'mpesaRef':_0x468b68[_0x2d5159(0xc0)]||_0x468b68[_0x2d5159(0xfd)],'amount':_0x468b68[_0x2d5159(0x144)],'status':_0x468b68[_0x2d5159(0xde)],'completedAt':_0x468b68[_0x2d5159(0xcf)]||new Date()[_0x2d5159(0x10d)]()},_0x4b021b=_0x331c28[_0x2d5159(0xe9)](_0x468b68['status'],'SUCCESS')||_0x468b68[_0x2d5159(0xde)]===_0x2d5159(0xc8)||_0x468b68[_0x2d5159(0xde)]===_0x331c28[_0x2d5159(0xd3)];return await _0x331c28['eOAJo'](updatePaymentStatus,_0x10a9ca,_0x4b021b?_0x331c28[_0x2d5159(0xd3)]:_0x2d5159(0xfb),_0x5e6e58),{'success':_0x4b021b,'details':_0x5e6e58};}}catch(_0x3feb81){if(_0x331c28['GqNJJ']===_0x331c28[_0x2d5159(0xea)])return console[_0x2d5159(0x104)](_0x2d5159(0x123),_0x3feb81),{'success':![],'error':_0x3feb81['message']};else _0x3eab46[_0x2d5159(0xe1)](_0x569c21);}}function clearExpiredPayments(){const _0x66da30=a25_0x2905b1,_0x3d7a3d={'RTWYZ':function(_0x471989,_0x405334){return _0x471989*_0x405334;}},_0x1f02d4=Date[_0x66da30(0x15b)](),_0x22e52b=_0x3d7a3d['RTWYZ'](_0x3d7a3d[_0x66da30(0x131)](0xa,0x3c),0x3e8);for(const [_0xcdf1bc,_0x412d31]of pendingPayments){_0x1f02d4-_0x412d31[_0x66da30(0xcb)]>_0x22e52b&&pendingPayments[_0x66da30(0xe1)](_0xcdf1bc);}}setInterval(clearExpiredPayments,0xea60),module['exports']={'initiateSTKPush':initiateSTKPush,'getPendingPayment':getPendingPayment,'updatePaymentStatus':updatePaymentStatus,'verifyPayment':verifyPayment,'setBotSocket':setBotSocket,'pendingPayments':pendingPayments,'sendCustomerReceipt':sendCustomerReceipt};